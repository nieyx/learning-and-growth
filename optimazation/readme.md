## 前端性能优化
>

### DNS寻址和IP地址解析
性能测试的网站[http://www.webpagetest.org/]
+ 当访问一个站点的时候，浏览器都做了什么？
+ 前端页面渲染的流程
	- HTML页面的请求
		*HTML文档的下载
		* HTML文档的解析解析 dom树生成 render树的生成 逐级解析dom
	- 浏览器的js引擎


### 通用的优化方式
+ 雅虎军规[http://www.cnblogs.com/xianyulaodi/p/5755079.html]
	- 内容方面
	1. 减少http的请求次数
	> 减少组件（图片，样式表，脚本，flash）
	>
	> 合并文件：把所有的脚本放在一个文件中，来减少请求数
	>
	> 精灵图： 将固定不变的图片，合并到一张图片上，，请求时至请求一次，使用时通过background-position，background-image

	2. 减少DNS查找
	> 域名系统建立了主机名和IP之间的映射
	> 
	> 在输入url之后，浏览器会联系dns解析器返回服务器的ip地址
	> 
	> 减少不同的主机名的数量，同事减少了页面能够并行下载组件的数量

	- css部分
	1.避免使用css表达式，很耗时
	2.选择link，舍弃@import，为了逐步渲染，css应该放在顶部，而import和底部的link功能一样
	3.避免使用滤镜，ie专门有滤镜可以来修复ie7之前的版本中png图片的问题，在图片加载的过程中，这个滤镜会阻塞渲染，卡住浏览器，还会增加内存的消耗而且被应用到每个元素，而不是每个图片，解决这种方法，不要使用滤镜，用ong8 图片来代替，或一定要使用滤镜，用hack，_filter来避免影响ie7及更高版本的用户
	4.把样式表放在顶部：研究发现，把样式表放在文档的head本分，能让也买呢更快的家在，这是因为把样式表放在head里，能躺也米娜逐步渲染

	- js部分
	1. 去除重复的脚本，减少不必要的http请求
	2. 尽量减少DOM的访问，js访问dom元素很慢，为了让页面反应迅速，应该
		* 缓存已访问过的元素的索引
		* 先离线更新节点，再把他们添加到DOM树上
		* 避免使用js来修复布局问题
	3. 用智能的事件处理器
		* 事件代理
	4. 把脚本放在底部
		* 脚本会阻塞并行下载，如果脚本来自多个主机名，并行下载的数量越多，浏览器就不在开始任何其他的下载任务，
		* firefox不支持defer属性，defer可以推迟脚本的下载
	- js／css部分
	1. 将js和css用外链的方式引用
		* 用外部引用的文件可以让页面更快，可以把html文档变小，但是增加的http的请求树，但是如果外部文件已经被浏览器缓存起来，那么就把html文档变小了，而且还没有增加http的请求树
	2. 压缩js和css
		* 去掉不必要的字符，已减少大小，从而提升速度
	- cookie
	1. 给cookie减肥
		* http头中的cookie信息在web服务器和浏览器之间交换，重要的是保证cookie尽可能的笑，以最小化用户的响应时间
	2. 把组件放倒不含cookie的域下
	- 图片
	1.优化图片
		* 把gif格式转化为png格式
	2.优化css sprite
		* 减少http的请求
	3.不要用html缩放图片
	4. 用小的可缓存的favicon.ico

	- 移动端
	1. 保证所欲的组件都小于25k
	2. 把组件打包到一个符合文档里

### 图片的优化
1. css动画，css效果，与提供的分辨率无关，显示清晰，占用空间小，图标库字体
2. 常见的图片
	+ jpg：全名是jpeg，24色存储，在颜色丰富，小
	+ png：透明图片，256色，大
	+ gif：动图，动画类
	+ svg：矢量图，可计算，放大缩小不会失真，暂用内存小（地图）
3. 图片加载的效果-- 压缩算法不同，更改文件的后缀，不会影响加载方式，压缩算法读取的是文件头部 
	+ 显示模糊，后来变得清晰 -- 晓波算法
	+ 开始就很清晰，但是要逐行加载 -- 离散余弦变化，

4. css精灵图
	+ 小的icon图片，合并在一张图片上，去请求，减少http请求，减少占用的带宽

5. 响应式动态图片加载（SDK）
	+ 需要默认图片，
	+ 把屏幕分辨率信息提供给服务器
	+ 服务器将高质的图片返回

6. picture 标签
	+ 不同屏幕宽度时加载不同的图片
	```js
		<picture>
			<source srcset="smaller.png" media="(max-width: 768px)">
			<source srcset="big.png" media="(min-width: 1000px)">
			<source srcset="default.png" alt='my default image'>
		</picture>
	```

### 视频性能优化
1. video标签播放，h5中新引入，不需要下载新的资源，每个浏览器对于video的ui外观不同，ui需要单独设置
2. flash 过去常用的播放器，插件多，

### 本地缓存方式
1. css样式表，js文件
2. sessionStorage：临时存储，关闭页面标签自动回收,不可以跨页面交互
3. userData + cookie ：
	+ userData存储内容小，
	+ cookie：大小有限制，每次请求，	请求头会带着cookie
4. openDatabase + localstorage
	+ openDatabase：是一个完整的数据库，对于 不熟悉数据库同学来说，成本高
5. localstorage边界值





















