<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        *{margin:0;padding:0;}
        .nav{
            height:30px;
            background: #036663;
            border-bottom:1px solid #369;
            line-height: 30px;
            padding-left:30px;
        }
        .nav a {
            color:#fff;
            text-align: center;
            font-size:14px;
            text-decoration: none;

        }
        .d-box{
            width:400px;
            height:300px;
            border:5px solid #eee;
            box-shadow:2px 2px 2px 2px #666;
            position: absolute;
            top:40%;
            left:40%;
        }
        .hd{
            width:100%;
            height:25px;
            background-color: #7c9299;
            border-bottom:1px solid #369;
            line-height: 25px;
            color:white;
            cursor: move;
        }
        #box_close{
            float: right;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div class="nav">
    <a href="javascript:;" id="register">注册信息</a>
</div>
<div class="d-box" id="d_box">
    <div class="hd" id="drop">注册信息   (可以拖拽)
        <span id="box_close">【关闭】</span>
    </div>
    <div class="bd"></div>
</div>
</body>
</html>
<script src="my.js"></script>
<script>
//    var box = document.getElementById("d_box");
//    var drop = document.getElementById("drop");
//    //分析1.当按下drop是触发的事件，onmousedown
//    drop.onmousedown = function (event) {
//        var event = event ||window.event;
//        //得到鼠标当前在页面上的值
//        var pagex = event.pageX || event.clientX+scroll().left;
//        var pagey = event.pageY || event.clientY+scroll().top;
//        //得到鼠标在要拖动的盒子内的值
//        var x = pagex - box.offsetWidth;
//        var y = pagey - box.offsetHeight;
//        document.onmousemove = function (event) {
//            var event = event ||window.event;
//            var pagex = event.pageX || event.clientX+scroll().left;
//            var pagey = event.pageY || event.clientY+scroll().top;
//            var xx = pagex-x;
//            var yy = pagey-y;
//            box.style.left = xx+"px";
//            box.style.top = yy+"px";
//            window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();
//
//        }
//
//    }
//    document.onmouseup = function () {
//            document.onmousemove = null;
//    }


    var box = document.getElementById("d_box");
    var drop = document.getElementById("drop");
    startDrop(drop,box);
    function startDrop(obj,target) {
        obj.onmousedown = function (event) {
            var event = event||window.event;
            var pagex = event.pageX ||event.clientX +scroll().left;
            var pagey = event.pageY ||event.clientY +scroll().top;
            var x = pagex-target.offsetLeft;
            var y = pagey-target.offsetTop;
            document.onmousemove = function (event) {
                var event = event||window.event;
                var pagex = event.pageX ||event.clientX +scroll().left;
                var pagey = event.pageY ||event.clientY +scroll().top;
                var xx = pagex-x;
                var yy = pagey-y;
                target.style.left=xx+"px";
                target.style.top=yy+"px";
            }
        }
        obj.onmouseup = function () {
            document.onmousemove = null;
        }
    }
    //点击关闭的啊标签的时候 box盒子消失
    var boxClose = document.getElementById("box_close");
    boxClose.onclick = function () {
        alert("确定要关闭么？")
        box.style.display = "none";
    }

</script>
